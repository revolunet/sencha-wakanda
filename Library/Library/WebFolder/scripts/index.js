Ext.setup({    onReady: function() {        var chartStore = new Ext.data.Store({            fields: ['author', 'count']        });        var store = new Ext.data.Store({            model: 'Author',            autoLoad: true,            listeners: {                load: function(store) {                    var data = [];                    store.each(function(record) {                        data.push({                            author: record.get('name').split(' ')[1],                            count: record.booksStore.getCount()                        });                    });                    chartStore.loadData(data);                }            }        });        var list = new Ext.List({            store: store,            itemTpl: '{name}',            listeners: {                itemtap: function(list, index) {                    var record = list.store.getAt(index);                    Ext.dispatch({                        action: 'list',                        record: record,                        controller: 'books',                        panel: list.ownerCt.ownerCt,                        historyUrl: 'author/' + record.getId()                    });                }            }        });        var chart = new Ext.chart.Panel({            toolbar: false,            title: 'Stats',            items: {                store: chartStore,                insetPadding: 20,                series: [{                    type: 'column',                    label: {field: 'count'},                    xField: 'author',                    yField: 'count'                }],                axes: [{                    type: 'Numeric',                    position: 'left',                    fields: ['count'],                    minimum: 0,                    maximum: 10,                    title: 'Books count'                }, {                    type: 'Category',                    position: 'bottom',                    fields: ['author'],                    title: 'Author'                }]            }        });        var toolbar = new Ext.Toolbar({            dock: 'top',            title: 'Library',            items: [{                ui: 'back',                text: 'back',                hidden: true,                handler: function() {                    Ext.dispatch({                        action: 'list',                        controller: 'authors',                        historyUrl: 'authors',                        panel: this.ownerCt.ownerCt                    });                }            }]        });        var panel = new Ext.Panel({            width: 320,            height: 480,            layout: 'card',            centered: true,            floating: true,            hideOnMaskTap: false,            dockedItems: toolbar,            items: {                layout: {                    type: 'vbox',                    align: 'stretch'                },                defaults: {flex: 1},                items: [list, chart]            },        });        panel.show();        // window.store = new Ext.data.TreeStore({        //     model: 'Author'        //     // root: data,        //     // proxy: {        //     //     type: 'wakanda'        //     //     // reader: {        //     //     //     type: 'tree',        //     //     //     root: 'items'        //     //     // }        //     // }        // });        //         // var nestedList = new Ext.NestedList({        //     width: 320,        //     height: 480,        //     title: 'Library',        //     displayField: 'name',        //     centered: true,        //     floating: true,        //     hideOnMaskTap: false,        //     store: window.store        // }).show();    }});